<!doctype html>
<html>

<head>
	{% load static %}
	<meta charset="utf-8">
	<title>실시간 조회</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">


  <!--datepicker, dropdown link-->
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="author" content="colorlib.com">
  <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500" rel="stylesheet" />
  <link href="{% static 'css/pi/main.css' %}" rel="stylesheet" />

  <!-- Le styles -->
  <link href="{% static 'css/bootstrap.css' %}" rel="stylesheet">
  <link href="{% static 'css/main.css' %}" rel="stylesheet">
  <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
  <!-- DATA TABLE CSS -->
  <link href="{% static 'css/table.css' %}" rel="stylesheet">

  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

  <!-- DataTables Initialization -->
  <script type="text/javascript" src="{% static 'js/datatables/jquery.dataTables.js' %}"></script>
  
  <script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
      $('#dt1').dataTable();
    });

  </script>

  <script type="text/javascript">
    function table() {
      f.action = "/table/"; //결제확인 페이지로 이동
      f.submit();
    }
  </script>
  <!--graph -->

  	<!-- realtime. 파이차트/지역별 집계 Resources   -->
	<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
	<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
	<script src="https://cdn.amcharts.com/lib/4/themes/dark.js"></script>
	<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
	<script src="{% static 'js/pie/piechart.js' %}"></script>


	<!-- realtime. 전체배경 스타일  -->
	<style type="text/css">
		body {
			padding-top: 60px;
		}
	</style>

	<!-- realtime. 지역별집계 차트 스타일 -->
	<style>
		#region-rank {
			width: 100%;
			height: 500px;
		}
	</style>











<!-- DataTables Initialization -->
<script type="text/javascript" src="{% static 'js/datatables/jquery.dataTables.js' %}"></script>
<script type="text/javascript" charset="utf-8">
  $(document).ready(function () {
	$('#dt1').dataTable();
  });

</script>


<script type="text/javascript">
  function table() {
	f.action = "/table/"; //결제확인 페이지로 이동
	f.submit();
  }
</script>


<!--graph -->

<style type="text/css">
  body {
	padding-top: 60px;
  }

	  #region-rank {
		  width: 100%;
		  height: 500px;
	  }

</style>

<!-- table.html 조회테이블 양식 -->
<style>
  .display {
	color: black;
  }

  .input {
	padding: 10px;
	font-family: 'GmarketSansMedium';
	font-style: normal;
	font-weight: normal;
	text-decoration: inherit;
	border-radius: 0 !important;
  }

  .form {
	border-radius: 0 !important;
	font-size: 12x;
  }

  .td {
	color: black;
  }

  .clickable {
	cursor: pointer;
  }

  .form-group {
	width: fit-content;
  }

  .inner-form {
	background: rgba(0, 0, 0, 0.5);
	padding: 16px;
	display: flex;
	margin-top: 10px;
	width: 100%;
	align-items: center;
	flex-wrap: wrap;
	align-items: center;
	box-sizing: border-box;
	justify-content: space-between;
  }

  .label {
	color: white;
  }

  .s002 {
	min-height: fit-content;
	display: -ms-flexbox;
	display: flex;
	-ms-flex-pack: center;
	justify-content: center;
	-ms-flex-align: center;
	align-items: center;
	font-family: 'GmarketSansMedium';
	background-color: #3d3d3d;
	background-size: cover;
	background-position: center center;
	padding-left: 15px;
	padding-right: 15px;
	padding-bottom: 50px;
  }

  .s003 {
	min-height: fit-content;
	min-width: width 1190px;
	background-color: #3d3d3d;
	color: white;
	background-size: cover;
	background-position: center center;
	padding-left: 15px;
	padding-right: 15px;
	padding-bottom: 50px;
  }


  .s002 form {
	width: 100%;
	max-width: 1190px;
  }

  .s002 form .inner-form {
	background: rgba(0, 0, 0, 0.5);
	padding: 16px;
	display: -ms-flexbox;
	display: flex;
	width: 100%;
	-ms-flex-pack: justify;
	justify-content: space-between;
	-ms-flex-align: center;
	align-items: center;
  }

  .s002 form .inner-form .input-field.fifth-wrap .btn-search {
	width: 100%;
	background: #0dac22;
	white-space: nowrap;
	border-radius: .5px;
	font-size: 18px;
	padding-top: 8px;
	padding-bottom: 8px;
	color: #fff;
	transition: all .2s ease-out, color .2s ease-out;
	border: 0;
	cursor: pointer;
	font-weight: 400;
	font-family: 'GmarketSansMedium';
  }

  .s002 form .inner-form .input-field.fifth-wrap .btn-search:hover {
	background: #2d8117;
  }
</style>



















	<!-- realtime. 지역별집계 code  -->

	<!-- Chart code -->
	<script>
		am4core.ready(function () {

			// amchart 에서 제공하는 테마를 적용합니다.
			am4core.useTheme(am4themes_dark);
			am4core.useTheme(am4themes_animated);

			// https://cdn.amcharts.com/lib/4/charts.js 에서 제공하는
			// XWChart 를 사용해서 막대차트를 생성합니다.
			var chart = am4core.create("region-rank", am4charts.XYChart);

			chart.data = [{
				"region": "도봉",
				"volume": 2025
			}, {
				"region": "성북",
				"volume": 1882
			}, {
				"region": "노원",
				"volume": 1809
			}, {
				"region": "중랑",
				"volume": 1322
			}, {
				"region": "동대문",
				"volume": 1122
			}, {
				"region": "광진",
				"volume": 1114
			}, {
				"region": "중구",
				"volume": 984
			}, {
				"region": "용산",
				"volume": 711
			}, {
				"region": "서대문",
				"volume": 665
			}, {
				"region": "마포",
				"volume": 580
			}, {
				"region": "은평",
				"volume": 443
			}];

			chart.padding(40, 10, 40, 10);



			// 기본 카테고리의 구조를 설정하는 변수입니다.
			var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());

			// ?
			categoryAxis.renderer.grid.template.location = 0;
			// 가로 카테고리를 지역(**구)로 지정합니다.
			categoryAxis.dataFields.category = "region";
			// 가로 카테고리(**구) 간격입니다.
			categoryAxis.renderer.minGridDistance = 10;
			// 막대를 순서대로 정렬합니다.
			categoryAxis.renderer.inversed = true;
			// 그리드 격자무늬를 숨깁니다.
			categoryAxis.renderer.grid.template.disabled = true;


			// Y축의 최소/최대 값을 변경하는 변수입니다.
			var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
			valueAxis.min = 0;
			valueAxis.extraMax = 0.1;
			// valueAxis.rangeChangeEasing = am4core.ease.linear;
			// valueAxis.rangeChangeDuration = 1500;

			// https://cdn.amcharts.com/lib/4/charts.js 에서 제공하는
			// ColumnSeries 를 사용해서 새로운 변수를 만듭니다.
			var series = chart.series.push(new am4charts.ColumnSeries());
			series.dataFields.categoryX = "region";
			series.dataFields.valueY = "volume";
			series.tooltipText = "{valueY.value}"

			// 막대의 모양(테두리,코너각) 설정입니다.
			series.columns.template.strokeOpacity = 0;
			series.columns.template.column.cornerRadiusTopRight = 10;
			series.columns.template.column.cornerRadiusTopLeft = 10;
			//series.interpolationDuration = 1500;
			//series.interpolationEasing = am4core.ease.linear;
			var labelBullet = series.bullets.push(new am4charts.LabelBullet());
			labelBullet.label.verticalCenter = "bottom";
			labelBullet.label.dy = -10;  // 막대 위 값의 거리입니다.
			labelBullet.label.text = "{values.valueY.workingValue.formatNumber('#.')}"; // valueY값을소수점 위 자리 모두 표시합니다.

			chart.zoomOutButton.disabled = true;

			// as by default columns of the same series are of the same color, we add adapter which takes colors from chart.colors color set
			series.columns.template.adapter.add("fill", function (fill, target) {
				return chart.colors.getIndex(target.dataItem.index);
			});

			setInterval(function () {
				am4core.array.each(chart.data, function (item) { // 위에서 설정한 데이터값을 불러옵니다.
					item.volume += Math.round(Math.random() * 20 - 10); // 랜덤값으로 volume을 넣어줍니다.
					item.volume = Math.abs(item.volume); // 절대값을 구합니다.
				})
				chart.invalidateRawData();
			}, 2000)

			categoryAxis.sortBySeries = series;

		}); // end am4core.ready()
	</script>


</head>


<body>


	<div class="wrapper wrapper-full-page ">
		<div class="full-page login-page section-image" filter-color="black" data-image="../static/img/bg13.jpg">
			<div class="content">
				<div class="container">

					<!-- 1. 지역별 집계 -->
					<div class="row">
						<div class="col-lg-12">
							<div class="pie-chart">
								<dtitle>지역별 집계</dtitle>
								<hr>
								<div id="region-rank"></div>
							</div>
						</div>
					</div>

					<!-- 2. 데이터테이블 -->
					<div class="row">
						<div class="col-sm-12 col-lg-12">
							<div class="pie-chart">
								<dtitle>data table</dtitle>
								<hr>
								<!--datepicker, dropdown menu-->
								<div class="container">
									<div class="row" style="margin-bottom:30px;">
										<div class="s002">
											<!--조회폼시작-->
											<form name="f" method="post" action="http://127.0.0.1:8000/table">
												{% csrf_token %}
												<label style="font-size:20px; color:white;"> 데이터 조회 </label>
												<div class="inner-form">
													<!--지역 선택-->
													<div class="input-field fouth-wrap">
														<div class="icon-wrap">
															<svg xmlns="http://www.w3.org/2000/svg" width="20"
																height="20" viewBox="0 0 24 24">
																<path
																	d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z">
																</path>
															</svg>
														</div>

														<select data-trigger="" name="choices-region">
															<option placeholder="전체">지역선택</option>
															<option>전체</option>
															<option>강남구</option>
															<option>강동구</option>
															<option>강북구</option>
															<option>강서구</option>
															<option>관악구</option>
															<option>광진구</option>
															<option>구로구</option>
															<option>금천구</option>
															<option>노원구</option>
															<option>도봉구</option>
															<option>동대문구</option>
															<option>동작구</option>
															<option>마포구</option>
															<option>서대문구</option>
															<option>서초구</option>
															<option>성동구</option>
															<option>성북구</option>
															<option>송파구</option>
															<option>양천구</option>
															<option>영등포구</option>
															<option>용산구</option>
															<option>은평구</option>
															<option>종로구</option>
															<option>중구</option>
															<option>중랑구</option>
														</select>
													</div> <!-- 지역선택 끝 -->
													<!--datepicker 시작 -->
													<div class="input-field second-wrap">
														<div class="icon-wrap">
															<svg xmlns="http://www.w3.org/2000/svg" width="24"
																height="24" viewBox="0 0 24 24">
																<path
																	d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z">
																</path>
															</svg>
														</div>
														<input class="datepicker" id="depart" name="choices-date"
															type="text" placeholder="29 Aug 2018" />
													</div>
													<div class="input-field third-wrap">
														<div class="icon-wrap">
															<svg xmlns="http://www.w3.org/2000/svg" width="24"
																height="24" viewBox="0 0 24 24">
																<path
																	d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z">
																</path>
															</svg>
														</div>
														<input class="datepicker" id="return" name="choices-date2"
															type="text" placeholder="30 Aug 2018" />
													</div>
													<!--datepicker 끝 -->
													<!--폐기물종류 선택-->
													<div class="input-field fouth-wrap">
														<div class="icon-wrap">
															<svg xmlns="http://www.w3.org/2000/svg" width="24"
																height="24" viewBox="0 0 24 24">
																<path
																	d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z">
																</path>
															</svg>
														</div>
														<select data-trigger="" name="choices-trash">
															<option placeholder="">품목조회</option>
															<option>전체</option>
															<option>금속(캔)</option>
															<option>유리(녹색)</option>
															<option>유리(투명)</option>
															<option>유리(갈색)</option>
															<option>플라스틱(녹색)</option>
															<option>플라스틱(투명)</option>
															<option>2차분류</option>
														</select>
													</div>
													<!--폐기물종류 선택-->
													<div class="input-field fifth-wrap">

														<button class="btn-search" type="button"
															onClick="table()">조회하기</button>
													</div>
												</div>
											</form>

											<!-- 조회 폼 끝 -->

										</div>
									</div>
									<script src="{% static 'js/choices.js'%}"></script>
									<script src="{% static 'js/flatpickr.js'%}"></script>
									<script>
										flatpickr(".datepicker",
											{});
									</script>
									<script>
										const choices = new Choices('[data-trigger]',
											{
												searchEnabled: false,
												itemSelectText: '',
											});
									</script>

									<!--table-->


									<div class="row">
										<div class="col-sm-12 col-lg-12">
											<h4><strong>Basic Table</strong></h4>
											<table class="display">
												<thead>
													<tr>
														<th>Band or Group</th>
														<th>Name</th>
														<th>Instrument</th>
														<th>Influence</th>
														<th>Awesome</th>
													</tr>
												</thead>
												<tbody style="text-color:bla">
													<tr class="odd">
														<td>Queen</td>
														<td>Brian May</td>
														<td>Guitar</td>
														<td class="center"> 7</td>
														<td class="center">9</td>
													</tr>
													<tr class="even">
														<td>Queen</td>
														<td>Roger Taylor</td>
														<td>Drums</td>
														<td class="center">5</td>
														<td class="center">7</td>
													</tr>
													<tr class="odd">
														<td>Beatles</td>
														<td>Paul McCartney</td>
														<td>Guitar &amp; Piano</td>
														<td class="center">8</td>
														<td class="center">9</td>
													</tr>
													<tr class="even">
														<td>Adele</td>
														<td>Adele</td>
														<td>None</td>
														<td class="center">8</td>
														<td class="center">8</td>
													</tr>
													<tr class="odd">
														<td>Britney Spears</td>
														<td>Britney Spears</td>
														<td>None</td>
														<td class="center">7</td>
														<td class="center">-5</td>
													</tr>
												</tbody>
											</table>
											<!--/END First Table -->
											<br>
										</div>
									</div><!-- /row -->
								</div> <!-- /container -->
							</div>
						</div>
					</div>

				</div> <!-- /container -->
			</div>
		</div>
	</div>




</body>

<!-- Le javascript
	================================================== -->


<!-- Placed at the end of the document so the pages load faster -->
<script type="text/javascript" src="{% static 'js/bootstrap.js' %}"></script>
<!-- <script type="text/javascript" src="assets/js/lineandbars.js"></script> -->

<script type="text/javascript" src="{% static 'js/dash-charts.js' %}"></script>
<script type="text/javascript" src="{% static 'js/gauge.js' %}"></script>

<!-- You can add more layouts if you want -->
<script type="text/javascript" src="{% static 'js/noty/themes/default.js' %}"></script>
<!-- <script type="text/javascript" src="assets/js/dash-noty.js"></script> This is a Noty bubble when you init the theme-->
<script type="text/javascript" src="http://code.highcharts.com/highcharts.js"></script>
<script src="{% static 'js/jquery.flexslider.js' %}" type="text/javascript"></script>

<script type="text/javascript" src="{% static 'js/admin.js' %}"></script>

<!--네비게이션-->
<!--   Core JS Files   -->
<script src="{% static 'js/core/jquery.min.js' %}"></script>
<script src="{% static 'js/core/popper.min.js' %}"></script>
<script src="{% static 'js/core/bootstrap.min.js' %}"></script>
<script src="{% static 'js/plugins/perfect-scrollbar.jquery.min.js' %}"></script>
<script src="{% static 'js/plugins/moment.min.js' %}"></script>

<!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
<script src="{% static 'js/plugins/bootstrap-switch.js' %}"></script>
<!--  Plugin for Sweet Alert -->
<script src="{% static 'js/plugins/sweetalert2.min.js' %}"></script>
<!-- Forms Validations Plugin -->
<script src="{% static 'js/plugins/jquery.validate.min.js' %}"></script>
<!--  Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
<script src="{% static 'js/plugins/query.bootstrap-wizard.js' %}"></script>
<!--	Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
<script src="{% static 'js/plugins/bootstrap-selectpicker.js' %}"></script>
<!--  Plugin for the DateTimePicker, full documentation here: https://eonasdan.github.io/bootstrap-datetimepicker/ -->
<script src="{% static 'js/plugins/bootstrap-datetimepicker.js' %}"></script>
<!--  DataTables.net Plugin, full documentation here: https://datatables.net/    -->
<script src="{% static 'js/plugins/jquery.dataTables.min.js' %}"></script>
<!--	Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
<script src=" {% static 'js/plugins/bootstrap-tagsinput.js' %}"></script>
<!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
<script src="{% static 'js/plugins/jasny-bootstrap.min.js' %}"></script>
<!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
<script src="{% static 'js/plugins/fullcalendar.min.js' %}"></script>
<!-- Vector Map plugin, full documentation here: http://jvectormap.com/documentation/ -->
<script src="{% static 'js/plugins/jquery-jvectormap.js' %}"></script>
<!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
<script src="{% static 'js/plugins/nouislider.min.js' %}"></script>
<!--  Google Maps Plugin    -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
<!-- Chart JS -->
<script src="{% static 'js/plugins/chartjs.min.js' %}"></script>
<!--  Notifications Plugin    -->
<script src="{% static 'js/plugins/bootstrap-notify.js' %}"></script>
<!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
<script src="{% static 'js/now-ui-dashboard.min.js?v=1.5.0' %}" type="text/javascript"></script>
<script>
	$(document).ready(function () {
		demo.checkFullPageBackgroundImage();
	});
</script>

</body>

</html>

<script type="text/javascript">
	$(document).ready(function () {
		$.ajax({
			type: "GET",
			url: "/ajaxTest",
			async: false,
			dataType: "json",
			success: function (result) {
				var html = '';

				for (data in result) {
					html += '<tr>';
					html += '<td>' + result + '</td>';
					html += '<td>' + result[data].trash_name + '</td>';
					html += '<td>' + result[data].trash_weight + '</td>';
					html += '<td>' + result[data].create_date + '</td>';
					html += '</tr>';
				}
				$("#dynamicTbody").empty();
				$("#dynamicTbody").append(html);
			}
		});
	});
</script>